spring.application.name=capstone-project
app.base.url=${APP_URL:https://truckie-be-e3bre6hmfqhcabba.southeastasia-01.azurewebsites.net}
# Database config
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/capstone-project}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:postgres}

# Hibernate - Validate mode (schema must match entities)
spring.jpa.hibernate.ddl-auto=validate
# Disable SQL logging in console
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
 
#oauth2
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.redirect-uri=${APP_URL}/v1.0/auths/login/oauth2/google
spring.security.oauth2.client.registration.google.scope=email,profile

#mail
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.templates.path=classpath:/templates/emails/
spring.mail.from=noreply@truckie.vn
notification.email.from-name=Truckie Logistics
notification.email.from-email=noreply@truckie.com
notification.email.rate-limit.per-hour=50
notification.email.rate-limit.per-day=200

# Frontend URL for email links
app.frontend.url=${FRONTEND_URL:http://localhost:3000}

# CORS Configuration - Allowed origins for API and WebSocket
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}


#swagger
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.enabled=true
springdoc.api-docs.enabled=true
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.operationsSorter=alpha
springdoc.packagesToScan=capstone_project
springdoc.pathsToMatch=/api/v1/**

# Redis configuration
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.username=${REDIS_USERNAME:default}
spring.data.redis.password=${REDIS_PASSWORD}
spring.data.redis.ssl.enabled=${REDIS_SSL:false}
spring.data.redis.timeout=60000
# Lettuce connection pool configuration
spring.data.redis.lettuce.pool.enabled=true
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1ms
# Cache configuration
spring.cache.type=redis

# ================= AUTH & JWT =================
auth.api.base-path=/api/v1/auths
email.api.base-path=/api/v1/emails

# JWT Configuration
jwt.secret=${JWT_SECRET}
jwt.access-token.expiration-ms=3600000
jwt.refresh-token.expiration-ms=2592000000
jwt.cache.enabled=true
jwt.cache.ttl-seconds=3600

# ================= USER & ROLE =================
user.api.base-path=/api/v1/users
manager.api.base-path=/api/v1/managers
role.api.base-path=/api/v1/roles
customer.api.base-path=/api/v1/customers
driver.api.base-path=/api/v1/drivers

# ================= ADMIN DASHBOARD =================
admin-dashboard.api.base-path=/api/v1/admin/dashboard

# ================= ADDRESS =================
address.api.base-path=/api/v1/address

# ================= VEHICLE =================
vehicle.api.base-path=/api/v1/vehicles
vehicle-type.api.base-path=/api/v1/vehicle-types
size-rule.api.base-path=/api/v1/size-rules
vehicle-maintenance.api.base-path=/api/v1/vehicle-maintenances
vehicle-service-record.api.base-path=/api/v1/vehicle-service-records
vehicle-assignment.api.base-path=/api/v1/vehicle-assignments
vehicle-fuel-consumption.api.base-path=/api/v1/vehicle-fuel-consumptions

# ================= CATEGORY =================
category.api.base-path=/api/v1/categories
category-pricing-detail.api.base-path=/api/v1/category-pricing-details

# ================= PRICING & DISTANCE =================
basing-price.api.base-path=/api/v1/basing-prices
distance.api.base-path=/api/v1/distances
distance-rule.api.base-path=/api/v1/distance-rules

# ================= ORDER =================
order.api.base-path=/api/v1/orders
order-detail.api.base-path=/api/v1/order-details
order-size.api.base-path=/api/v1/order-sizes
pdf.api.base-path=/api/v1/orders
bill-of-lading.api.base-path=/api/v1/bill-of-ladings
photo-completion.api.base-path=/api/v1/photo-completions
payos-transaction.api.base-path=/api/v1/transactions/pay-os
stripe-transaction.api.base-path=/api/v1/transactions/stripe
transaction.api.base-path=/api/v1/transactions
packing-proof-image.api.base-path=/api/v1/packing-proof-images
loading-documentation.api.base-path=/api/v1/loading-documentation

# ================= RECIPIENT TRACKING (PUBLIC) =================
recipient-tracking.api.base-path=/api/v1/public/recipient-tracking

journey-history.api.base-path=/api/v1/journey-histories

# ================= CONTRACT =================
contract.api.base-path=/api/v1/contracts
contract-rule.api.base-path=/api/v1/contract-rules

# ================= PENALTY =================
penalty.api.base-path=/api/v1/penalties

# ================= ISSUE =================
issue.api.base-path=/api/v1/issues
issue-type.api.base-path=/api/v1/issue-types
issue-image.api.base-path=/api/v1/issue-images
issue-customer.api.base-path=/api/v1/issue/customer
damage-resolution.api.base-path=/api/v1/damage-resolution
# Return payment deadline in minutes (driver cannot wait too long)
issue.return-payment.deadline-minutes=30

# ================= OFF-ROUTE WARNING CONFIG =================
# Khoảng cách lệch tuyến tối đa cho phép, mét - testing threshold (giảm để dễ test)
offroute.max-distance-meters=30.0
# Thời gian lệch tuyến tối thiểu để gửi cảnh báo VÀNG (giây)
offroute.warning.yellow-seconds=5
# Thời gian lệch tuyến tối thiểu để gửi cảnh báo ĐỎ (giây)
offroute.warning.red-seconds=10
# Thời gian chờ driver quay lại route sau khi staff liên hệ (phút)
offroute.contact.grace-period-minutes=1
# Thời gian gia hạn cho mỗi lần staff gia hạn (phút)
offroute.contact.extension-minutes=1
# Khoảng cách tối thiểu để xác nhận driver đang quay lại route (mét)
offroute.return.min-distance-meters=50.0

# ================= REFUND =================
refund.api.base-path=/api/v1/refunds

# ================= DEVICE =================
device.api.base-path=/api/v1/devices
device-type.api.base-path=/api/v1/device-types

# ================= USER CHAT =================
user-chat.api.base-path=/api/v1/user-chat
# ================= SETTING =================
system-setting.api.base-path=/api/v1/system-settings
contract-setting.api.base-path=/api/v1/contract-settings
weight-unit-setting.api.base-path=/api/v1/weight-unit-settings
carrier-setting.api.base-path=/api/v1/carrier-settings
stipulation-setting.api.base-path=/api/v1/stipulation-settings

# ================= SEAL =================
seal.api.base-path=/api/v1/seals

# ================= VIETMAP =================
vietmap.api.base-path=/api/v1/vietmap
# ================= NOTIFICATION =================
notification.api.base-path=/api/v1/notifications

# ================= DASHBOARD =================
dashboard.api.base-path=/api/v1/dashboard

# ================= DEMO DATA (DASHBOARD) =================
demo-data.api.base-path=/api/v1/admin/demo/dashboard-data

# ================= ROUTE =================
route.api.base-path=/api/v1/routes

#app.cors.allowed-origins=https://truckie.io.vn,\
#  http://localhost:5173,\
#  http://localhost:5174,\
#  http://localhost:8080,\
#  http://14.225.253.8:3000,\
#  https://domain.com

# Admin user configuration
admin.username=${ADMIN_USERNAME:admin}
admin.email=${ADMIN_EMAIL:admin@example.com}
admin.password=${ADMIN_PASSWORD:admin}

# AI Chatbot Configuration (Google Gemini)
ai.gemini.api-key=${GEMINI_API_KEY}
ai.gemini.model=gemini-2.5-flash
ai.gemini.base-url=https://generativelanguage.googleapis.com/v1beta
ai.gemini.temperature=0.7
ai.gemini.max-tokens=2048

# Vietmap API Configuration
vietmap.api.key=${VIETMAP_API_KEY}
vietmap.alternative.api.key=${VIETMAP_ALTERNATIVE_API_KEY}
vietmap.base-url=https://maps.vietmap.vn
vietmap.api.search.demo.endpoint=/api/search/demo
vietmap.api.place.demo.endpoint=/api/place/demo
vietmap.api.autocomplete.demo.endpoint=/api/autocomplete/demo
vietmap.api.reverse-geocode.demo.endpoint=/api/reverse/demo
vietmap.api.route.endpoint=/api/route/v3
vietmap.api.autocomplete.endpoint=/api/autocomplete/v3
vietmap.api.reverse-geocode.endpoint=/api/reverse/v3
vietmap.api.place.endpoint=/api/place/v3
vietmap.api.route-tolls.endpoint=/api/route-tolls
vietmap.parameter.value.default.hcm.focus=10.762622,106.660172
vietmap.parameter.value.city.id.hcm=12
vietmap.maps.styles.endpoint=/maps/styles/tm/tiles.json
vietmap.maps.mobile.styles.endpoint=/api/maps/raster/styles.json

# Vietmap Route API v3 Default Configuration
vietmap.route.default.alternative=true
vietmap.route.default.time=2025-08-01T17:00:00Z

# Stripe API Configuration
stripe.secret-key=${STRIPE_SECRET_KEY}
stripe.webhook-secret-key=${STRIPE_WEBHOOK_SECRET}
stripe.publishable-key=${STRIPE_PUBLISHABLE_KEY}

# ================= LOGGING CONFIGURATION =================
# Root logging level - only show WARN and ERROR by default
logging.level.root=WARN

# Application package - show INFO for our code
logging.level.capstone_project=INFO
logging.level.org.hibernate=INFO
logging.level.org.hibernate.SQL=INFO

# Spring Framework - reduce noise
logging.level.org.springframework=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.boot=WARN
logging.level.org.springframework.boot.autoconfigure=ERROR
logging.level.org.springframework.context=WARN
logging.level.org.springframework.security=WARN

# Hibernate - hide SQL and binding parameters
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=ERROR
logging.level.org.hibernate.engine.transaction.internal.TransactionImpl=ERROR

# Database - only errors
logging.level.org.springframework.jdbc.core=ERROR
logging.level.org.springframework.data.redis=ERROR
logging.level.org.springframework.data.redis.core=ERROR

# WebSocket - only errors
logging.level.org.springframework.web.socket=ERROR
logging.level.org.springframework.messaging=ERROR

# Connection pool - only errors
logging.level.com.zaxxer.hikari=ERROR

# Other libraries - only errors
logging.level.io.lettuce=ERROR
logging.level.reactor=ERROR
logging.level.org.apache=ERROR

# Pattern for console output
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

spring.web.resources.add-mappings=false

# Cloudinary Configuration
cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME}
cloudinary.api-key=${CLOUDINARY_API_KEY}
cloudinary.api-secret=${CLOUDINARY_API_SECRET}
cloudinary.secure=true

#payos
payos.client-id=${PAYOS_CLIENT_ID}
payos.api-key=${PAYOS_API_KEY}
payos.checksum-key=${PAYOS_CHECKSUM_KEY}
payos.base-url=https://api-merchant.payos.vn
payos.return-url=${FRONTEND_URL}/payment/return
payos.cancel-url=${FRONTEND_URL}/payment/cancel

management.tracing.enabled=false

# OptaPlanner configuration
optaplanner.solver.termination.spent-limit=5s
#optaplanner.constraint.weights.ItemMustFitDimensions=HARD/10
#optaplanner.constraint.weights.OverWeightCapacity=HARD/1
#optaplanner.constraint.weights.OverVolumeCapacity=HARD/1
#optaplanner.constraint.weights.MinimizeVehiclesUsed=SOFT/1000
#optaplanner.constraint.weights.MinimizeLeftoverWeight=SOFT/1

#local

#spring.datasource.driver-class-name=org.postgresql.Driver
#spring.datasource.url=jdbc:postgresql://localhost:5432/capstone-project
#spring.datasource.username=postgres
#spring.datasource.password=postgres

#spring.data.redis.host=localhost
#spring.data.redis.port=6379
#spring.data.redis.ssl.enabled=false

# Enable DevTools
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# Optional: Additional paths to watch
spring.devtools.restart.additional-paths=src/main/java

# Optional: Trigger file for manual restart
spring.devtools.restart.trigger-file=.reloadtrigger


# Faster restart
spring.devtools.restart.poll-interval=1000
spring.devtools.restart.quiet-period=400

# LiveReload server port (default 35729)
spring.devtools.livereload.port=35729

# Disable template caching for development
spring.thymeleaf.cache=false
spring.freemarker.cache=false
spring.groovy.template.cache=false

# Prefix code for Order and OrderDetail
prefix.order.code=ORD
prefix.order.detail.code=ORD_D_
prefix.vehicle.assignment.code=TRIP_

# ================= ORDER CANCELLATION REASONS =================
# Staff cancellation reasons (comma-separated, Vietnamese)
# NOTE: Runtime sẽ đọc từ file order-cancellation.properties (UTF-8).
# Dòng dưới được comment để tránh override giá trị UTF-8 bằng bản ISO-8859-1 trong application.properties.
# order.cancellation.reasons.staff=Không đủ điều kiện vận chuyển,Hàng hóa không phù hợp với dịch vụ,Thông tin đơn hàng không chính xác,Địa chỉ giao hàng không hợp lệ,Khách hàng yêu cầu hủy,Không thể liên lạc với khách hàng,Hàng hóa bị cấm vận chuyển,Lý do khác
penalty.truck.traffic-violations=Chạy quá tốc độ,Vượt đèn đỏ,Đi sai làn đường,Không giữ khoảng cách an toàn,Không chấp hành tín hiệu giao thông,Chở quá tải trọng cho phép,Không có hoặc không mang theo giấy tờ xe,Không thắt dây an toàn,Sử dụng điện thoại khi lái xe,Đỗ dừng xe sai quy định,Lý do khác

#server.port=8080

server.address=0.0.0.0
server.port=${PORT:8080}


# Multipart file upload configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.file-size-threshold=2KB

# Liquibase Configuration
spring.liquibase.enabled=true
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.xml
spring.liquibase.drop-first=false

# Weight Unit Configuration
app.weight.units.default=Tấn
app.weight.units.available=Tấn,Kí,Kilogram,Tạ,Yến

# ================= API ENDPOINTS =================
# Vehicle Service Record Demo API Endpoints
api.vehicle-service-record.demo.generate=/api/v1/vehicle-service-records/demo/generate
api.vehicle-service-record.demo.clear=/api/v1/vehicle-service-records/demo/clear
api.vehicle-service-record.demo.stats=/api/v1/vehicle-service-records/demo/stats
api.vehicle-service-record.demo.update-overdue=/api/v1/vehicle-service-records/demo/update-overdue
